<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="bv_report_invoice_document_inherit" inherit_id="account.report_invoice_document">
        <xpath expr="//div[@name='origin']" position="after">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.vehicle_number" name="vehicle_number">
                <strong>Vehicle Number:</strong>
                <p class="m-0" t-field="o.vehicle_number"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.po_number" name="po_number">
                <strong>PO Number:</strong>
                <p class="m-0" t-field="o.po_number"/>
            </div>
        </xpath>

        <!--- Stamp and signature -->
        <xpath expr="//div[@t-if='not is_html_empty(o.narration)']" position="after">
            <div t-if="o.invoice_user_id.sign_signature" class="mt32 ml64 mr4" name="signature">
                <div class="text-center">
                    <div class="offset-8">
                        <strong>Signature</strong>
                    </div>
                    <div class="offset-8">
                        <img
                                t-att-src="image_data_uri(o.invoice_user_id.sign_signature)"
                                style="max-height: 3cm; max-width: 7cm;"
                        />
                    </div>
                    <div class="offset-8 text-center" t-if="o.invoice_user_id.company_id">
                        <img
                                t-att-src="image_data_uri(o.invoice_user_id.company_id.company_stamp)"
                                style="max-height: 3cm; max-width: 7cm;"
                        />
                    </div>
                </div>
            </div>
        </xpath>

    </template>
    <template id="bv_tax_groups_totals_inherit" inherit_id="account.tax_groups_totals">
        <xpath expr="//t[1]" position="replace">
            <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
                <tr>
                    <t t-if="tax_totals['display_tax_base']">
                        <td>
                            <span t-esc="amount_by_group['tax_group_name']"/>
                            <span class="text-nowrap">
                                <t t-esc="amount_by_group['tax_percentage']"/>%
                            </span>
                        </td>
                        <td class="text-end o_price_total">
                            <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']"/>
                        </td>
                    </t>
                    <t t-else="">
                        <td><span class="text-nowrap" t-esc="amount_by_group['tax_group_name']"/></td>
                        <td class="text-end o_price_total">
                            <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']" />
                        </td>
                    </t>
                </tr>
            </t>
        </xpath>
    </template>
    <template id="address_layout_inherit" inherit_id="web.address_layout">
        <xpath expr="//t[@t-if='address']" position="replace">
            <t t-if="address">
                <div class="address col">
                    <t t-if="address">
                        <div name="address" class="col mt-5">
                            <t t-esc="address"/>
                            <div name="pan_number">
                                <span t-field="o.partner_id.pan_card"/>
                            </div>
                        </div>
                    </t>

                    <t t-if="information_block">
                        <t t-set="colclass" t-value="'col-5 offset-1'"/>
                        <div name="information_block" class="col-6 mt-5">
                            <t t-out="information_block"/>
                        </div>
                    </t>
                </div>
            </t>
        </xpath>
    </template>

    <!-- External Layout Standard -->
    <template id="external_layout_standard" inherit_id="web.external_layout_standard">
        <xpath expr="//div[@name='company_address']" position="replace">
            <div class="first-page">
                <div class="col-6" name="company_address">
                    <span t-if="company.company_details" t-field="company.company_details"></span>
                    <span t-else="" t-field="company.partner_id"
                          t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'/>
                </div>
            </div>
        </xpath>
    </template>
</odoo>

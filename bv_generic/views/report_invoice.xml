<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="bv_l10n_in_report_invoice_document_inherit"
              inherit_id="l10n_in.l10n_in_report_invoice_document_inherit">
        <xpath expr="//t[@class='mt16']" position="replace">
            <div name="pan_number" t-if="o.partner_id.pan_card">
                <span>
                    <strong>PAN No.:</strong>
                    <span t-field="o.partner_id.pan_card"/>
                </span>
                <t t-if="o.company_id.account_fiscal_country_id.code == 'IN' and o.l10n_in_state_id" class="mt16">
                    <br/>
                    <span>
                        <strong>Place of supply:</strong>
                        <span t-esc="o.l10n_in_state_id.name"/>
                    </span>
                </t>
            </div>
        </xpath>
    </template>
    <template id="bv_report_invoice_document_inherit" inherit_id="account.report_invoice_document">
        <xpath expr="//div[@id='informations']//div[@name='due_date']" position="attributes">
            <attribute name="style">display:none</attribute>
        </xpath>
        <xpath expr="//div[@name='origin']" position="after">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.vehicle_number" name="vehicle_number">
                <strong>Vehicle Number:</strong>
                <p class="m-0" t-field="o.vehicle_number"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.po_number" name="po_number">
                <strong>PO Number:</strong>
                <p class="m-0" t-field="o.po_number"/>
            </div>
        </xpath>
        <xpath expr="//th[@name='th_description']//span" position="replace">
            <span>Product name</span>
        </xpath>

        <!-- Line index number -->
        <xpath expr="//th[@name='th_description']" position="before">
            <th name="th_si_no" class="text-center">
                <span>S.No</span>
            </th>
        </xpath>
        <xpath expr="//td[@name='account_invoice_line_name']" position="before">
            <td name="si_no" class="text-center">
                <span t-esc="line_index + 1"/>
            </td>
        </xpath>

        <!-- Table order -->
        <xpath expr="//table[@name='invoice_line_table']" position="attributes">
            <attribute name="class">table table-sm o_main_table</attribute>
        </xpath>
        <xpath expr="//div[@id='total']//table" position="attributes">
            <attribute name="class">table table-sm</attribute>
        </xpath>
        <xpath expr="//div[@id='total_payment_term_details_table']//table" position="attributes">
            <attribute name="class">table table-sm</attribute>
        </xpath>
        <xpath expr="//div[hasclass('page')]" position="attributes">
            <attribute name="style">font-size:14px;</attribute>
        </xpath>
        <xpath expr="//div[hasclass('page')]//h2" position="attributes">
            <attribute name="style">font-size:18px;</attribute>
        </xpath>
        <xpath expr="//div[hasclass('mt-5')]" position="attributes">
            <attribute name="class">mt-4</attribute>
        </xpath>

        <xpath expr="//div[hasclass('page')]//h2" position="before">
            <t t-if="context.get('transporter_account_invoices')">
                <span><strong style="font-size:0.90rem;">Duplicate for Transporter</strong></span>
            </t>
            <t t-elif="context.get('triplicate_account_invoices')">
                <span><strong style="font-size:0.90rem;">Triplicate for Supplier</strong></span>
            </t>
            <t t-else="">
                <span><strong style="font-size:0.90rem;">Invoice For original Recipients</strong></span>
            </t>
        </xpath>

        <!--- Stamp and signature -->
<!--        <xpath expr="//div[@t-if='not is_html_empty(o.narration)']" position="after">-->
<!--            <div t-if="o.invoice_user_id.sign_signature" class="mt32 ml64 mr4" name="signature">-->
<!--                <div class="text-center">-->
<!--                    <div class="offset-8">-->
<!--                        <strong>Signature</strong>-->
<!--                    </div>-->
<!--                    <div class="offset-8">-->
<!--                        <img-->
<!--                                t-att-src="image_data_uri(o.invoice_user_id.sign_signature)"-->
<!--                                style="max-height: 3cm; max-width: 7cm;"-->
<!--                        />-->
<!--                    </div>-->
<!--                    <div class="offset-8 text-center" t-if="o.invoice_user_id.company_id">-->
<!--                        <img-->
<!--                                t-att-src="image_data_uri(o.invoice_user_id.company_id.company_stamp)"-->
<!--                                style="max-height: 3cm; max-width: 7cm;"-->
<!--                        />-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </xpath>-->

    </template>
    <template id="bv_tax_groups_totals_inherit" inherit_id="account.tax_groups_totals">
        <xpath expr="//t[1]" position="replace">
            <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
                <tr>
                    <t t-if="tax_totals['display_tax_base']">
                        <td>
                            <span t-esc="amount_by_group['tax_group_name']"/>
                            <span class="text-nowrap">
                                <t t-esc="amount_by_group['tax_percentage']"/>%
                            </span>
                        </td>
                        <td class="text-end o_price_total">
                            <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']"/>
                        </td>
                    </t>
                    <t t-else="">
                        <td><span class="text-nowrap" t-esc="amount_by_group['tax_group_name']"/></td>
                        <td class="text-end o_price_total">
                            <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']" />
                        </td>
                    </t>
                </tr>
            </t>
        </xpath>
    </template>
    <template id="address_layout_inherit" inherit_id="web.address_layout">
        <xpath expr="//t[@t-if='address']" position="replace">
            <div class="row" style="margin-top: 7.75rem !important; font-size:14px;">
                <t t-if="address">
                    <div class="col-5">
                        <t t-if="address">
                            <div name="address">
                                <span t-if="address">
                                    <strong>Billing Address: </strong>
                                    <t t-esc="address"/>
                                </span>
<!--                                <div name="pan_number" t-if="o.partner_id.pan_card">-->
<!--                                    <span>-->
<!--                                        <strong>PAN No.:</strong>-->
<!--                                        <span t-field="o.partner_id.pan_card"/>-->
<!--                                    </span>-->
<!--                                </div>-->
                            </div>
                        </t>
                    </div>
                    <div class="col-2"/>
                    <div class="col-5">
                        <t t-if="information_block">
                            <div name="information_block">
                                <t t-out="information_block"/>
                            </div>
                        </t>
                    </div>
                </t>
            </div>
            <div class="row mt-3">
                <t t-if="address">
                    <div class="col-5">
                        <t t-if="information_block_2">
                            <div name="information_block_2">
                                <t t-out="information_block_2"/>
                            </div>
                        </t>
                    </div>
                </t>
            </div>
        </xpath>
    </template>

    <!-- External Layout Standard -->
    <template id="external_layout_standard" inherit_id="web.external_layout_standard">
        <xpath expr="//div[hasclass('zero_min_height')]" position="before">
            <div t-if="doc_model in ['account.move']" class="first-page">
                <div t-if="o.move_type in ('out_invoice', 'out_refund', 'out_receipt')"
                     class="row">
                    <div class="col-5"/>
                    <div class="col-2" style="font-size:18px;">
                        <strong> Tax Invoice </strong>
                    </div>
                    <div class="col-5"/>
                </div>
            </div>
            <div t-if="doc_model in ['sale.order']" class="first-page">
                <div class="row">
                    <div class="col-5"/>
                    <div class="col-2" style="font-size:18px;">
                        <strong> Sales Order </strong>
                    </div>
                    <div class="col-5"/>
                </div>
            </div>
            <div t-if="doc_model in ['purchase.order']" class="first-page">
                <div class="row">
                    <div class="col-5"/>
                    <div class="col-2" style="font-size:18px;">
                        <strong> Purchase Order </strong>
                    </div>
                    <div class="col-5"/>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[@name='company_address']" position="replace">
            <div class="first-page">
                <div class="row" style="font-size:14px;">
                    <div class="col-5 align-self-start" name="company_address">
                        <strong>Head office Address: </strong>
                            <span t-if="company.company_details" t-field="company.company_details"></span>
                            <span t-else="" t-field="company.partner_id"
                                  t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'/>
                    </div>
                    <div class="col-2"/>
                    <div class="col-5 justify-content-end" name="factory_address_info">
                        <strong>Factory Address: </strong><br/>
                        <span t-if="company.factory_address" t-field="company.factory_address"/><br/>
                        <strong>PAN No.: </strong><span t-if="company.factory_pan_number" t-field="company.factory_pan_number"/>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template
            id="l10n_in_report_invoice_document_inherit"
            inherit_id="l10n_in.l10n_in_report_invoice_document_inherit"
    >
        <xpath expr="//span[@t-field='o.l10n_in_gstin']" position="attributes">
            <attribute name="style">display:none;</attribute>
        </xpath>
        <xpath expr="//p[@id='total_in_words']" position="attributes">
            <attribute name="style">display:none;</attribute>
        </xpath>
    </template>
</odoo>
